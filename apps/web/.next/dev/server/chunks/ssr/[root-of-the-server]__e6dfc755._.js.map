{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/dane/Development/writual_client/apps/web/src/components/OutlineFrameworkForm/OutlineFrameworkForm.tsx"],"sourcesContent":["'use client';\n\nimport * as React from 'react';\nimport {\n  Box,\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  IconButton,\n  TextField,\n  Typography,\n  useTheme,\n} from '@mui/material';\nimport DeleteOutlineIcon from '@mui/icons-material/DeleteOutline';\nimport AddIcon from '@mui/icons-material/Add';\n\nexport interface OutlineStepInput {\n  step_id?: string;\n  name: string;\n  /** Set on submit from array index + 1; not edited in the form. */\n  number?: number;\n  act: string;\n  instructions: string;\n}\n\nexport interface OutlineFrameworkFormValues {\n  imageUrl: string;\n  formatName: string;\n  steps: OutlineStepInput[];\n}\n\nexport interface OutlineFrameworkFormProps {\n  open: boolean;\n  onClose: () => void;\n  onSubmit: (values: OutlineFrameworkFormValues) => void;\n  initialData?: {\n    id: string;\n    name: string;\n    imageUrl?: string;\n    format?: {\n      name?: string;\n      steps?: Array<{ step_id?: string; name?: string; number?: number; act?: string; instructions?: string }>;\n    };\n  } | null;\n  submitLabel?: string;\n  submitting?: boolean;\n}\n\nconst defaultStep = (): OutlineStepInput => ({\n  name: '',\n  act: '',\n  instructions: '',\n});\n\nexport function OutlineFrameworkForm({\n  open,\n  onClose,\n  onSubmit,\n  initialData = null,\n  submitLabel = 'Create framework',\n  submitting = false,\n}: OutlineFrameworkFormProps) {\n  const theme = useTheme();\n  const [imageUrl, setImageUrl] = React.useState('');\n  const [formatName, setFormatName] = React.useState('');\n  const [steps, setSteps] = React.useState<OutlineStepInput[]>([]);\n\n  React.useEffect(() => {\n    if (!open) return;\n    if (initialData) {\n      setImageUrl(initialData.imageUrl ?? '');\n      setFormatName(initialData.format?.name ?? initialData.name ?? '');\n      setSteps(\n        (initialData.format?.steps?.length\n          ? initialData.format.steps.map((s) => ({\n              step_id: s.step_id,\n              name: s.name ?? '',\n              act: s.act ?? '',\n              instructions: s.instructions ?? '',\n            }))\n          : [defaultStep()]) as OutlineStepInput[]\n      );\n    } else {\n      setImageUrl('');\n      setFormatName('');\n      setSteps([defaultStep()]);\n    }\n  }, [open, initialData]);\n\n  const handleAddStep = () => {\n    setSteps((prev) => [...prev, defaultStep()]);\n  };\n\n  const handleRemoveStep = (index: number) => {\n    if (steps.length <= 1) return;\n    setSteps((prev) => prev.filter((_, i) => i !== index));\n  };\n\n  const handleStepChange = (index: number, field: keyof OutlineStepInput, value: string | number) => {\n    setSteps((prev) =>\n      prev.map((s, i) => (i === index ? { ...s, [field]: value } : s))\n    );\n  };\n\n  const handleSubmit = () => {\n    const formatSteps = steps.map((s, i) => ({\n      step_id: s.step_id || `step_${i}`,\n      name: s.name,\n      number: i + 1,\n      act: s.act,\n      instructions: s.instructions,\n    }));\n    onSubmit({\n      imageUrl,\n      formatName,\n      steps: formatSteps,\n    });\n  };\n\n  const canSubmit = formatName.trim().length > 0;\n\n  return (\n    <Dialog\n      fullWidth\n      maxWidth=\"sm\"\n      open={open}\n      onClose={onClose}\n      PaperProps={{ style: { backgroundColor: theme.palette.background.default } }}\n    >\n      <DialogTitle sx={{ px: 3, pt: 2, pb: 0.5 }}>\n        {initialData ? 'Edit outline framework' : 'Create outline framework'}\n      </DialogTitle>\n      <DialogContent sx={{ display: 'flex', flexDirection: 'column', gap: 2, px: 3, pt: 2, minHeight: 420 }}>\n        <TextField\n          label=\"Format name\"\n          value={formatName}\n          onChange={(e) => setFormatName(e.target.value)}\n          fullWidth\n          required\n          InputLabelProps={{ shrink: true }}\n          sx={{ mt: 0.5 }}\n        />\n        <TextField\n          label=\"Image URL\"\n          value={imageUrl}\n          onChange={(e) => setImageUrl(e.target.value)}\n          fullWidth\n          placeholder=\"https://...\"\n        />\n        <Box sx={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', mt: 1 }}>\n          <Typography variant=\"subtitle2\">Steps</Typography>\n          <Button size=\"small\" startIcon={<AddIcon />} onClick={handleAddStep}>\n            Add step\n          </Button>\n        </Box>\n        {steps.map((step, index) => (\n          <Box\n            key={index}\n            sx={{\n              p: 1.5,\n              border: 1,\n              borderColor: 'divider',\n              borderRadius: 1,\n              display: 'flex',\n              flexDirection: 'column',\n              gap: 1,\n            }}\n          >\n            <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n              <Typography variant=\"caption\" color=\"text.secondary\">\n                Step {index + 1}\n              </Typography>\n              <IconButton\n                size=\"small\"\n                onClick={() => handleRemoveStep(index)}\n                disabled={steps.length <= 1}\n                aria-label=\"Remove step\"\n              >\n                <DeleteOutlineIcon fontSize=\"small\" />\n              </IconButton>\n            </Box>\n            <TextField\n              size=\"small\"\n              label=\"Name\"\n              value={step.name}\n              onChange={(e) => handleStepChange(index, 'name', e.target.value)}\n              fullWidth\n            />\n            <TextField\n              size=\"small\"\n              label=\"Act\"\n              value={step.act}\n              onChange={(e) => handleStepChange(index, 'act', e.target.value)}\n              fullWidth\n            />\n            <TextField\n              size=\"small\"\n              label=\"Instructions\"\n              value={step.instructions}\n              onChange={(e) => handleStepChange(index, 'instructions', e.target.value)}\n              fullWidth\n              multiline\n              minRows={2}\n            />\n          </Box>\n        ))}\n      </DialogContent>\n      <DialogActions sx={{ px: 3, pb: 3 }}>\n        <Button onClick={onClose} color=\"secondary\" disabled={submitting}>\n          Cancel\n        </Button>\n        <Button\n          variant=\"contained\"\n          onClick={handleSubmit}\n          disabled={!canSubmit || submitting}\n        >\n          {submitLabel}\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 333, "column": 0}, "map": {"version":3,"sources":["file:///Users/dane/Development/writual_client/apps/web/src/components/OutlineFrameworkForm/index.ts"],"sourcesContent":["export * from './OutlineFrameworkForm';\n"],"names":[],"mappings":";AAAA"}},
    {"offset": {"line": 340, "column": 0}, "map": {"version":3,"sources":["file:///Users/dane/Development/writual_client/apps/web/src/mutations/OutlineMutations.ts"],"sourcesContent":["import { gql } from 'graphql-request';\n\nexport const CREATE_OUTLINE_FRAMEWORK = gql`\n  mutation CreateOutlineFramework($input: OutlineFrameworkInput!) {\n    createOutlineFramework(input: $input) {\n      id\n      user\n      name\n      imageUrl\n      format {\n        format_id\n        name\n        steps {\n          step_id\n          name\n          number\n          act\n          instructions\n        }\n      }\n    }\n  }\n`;\n\nexport const UPDATE_OUTLINE_FRAMEWORK = gql`\n  mutation UpdateOutlineFramework($id: String!, $input: OutlineFrameworkInput!) {\n    updateOutlineFramework(id: $id, input: $input) {\n      id\n      user\n      name\n      imageUrl\n      format {\n        format_id\n        name\n        steps {\n          step_id\n          name\n          number\n          act\n          instructions\n        }\n      }\n    }\n  }\n`;\n"],"names":[],"mappings":";;;;;;AAAA;;AAEO,MAAM,2BAA2B,0QAAG,CAAC;;;;;;;;;;;;;;;;;;;;AAoB5C,CAAC;AAEM,MAAM,2BAA2B,0QAAG,CAAC;;;;;;;;;;;;;;;;;;;;AAoB5C,CAAC"}},
    {"offset": {"line": 394, "column": 0}, "map": {"version":3,"sources":["file:///Users/dane/Development/writual_client/apps/web/src/components/SettingsPopover/SettingsPopover.tsx"],"sourcesContent":["'use client';\n\nimport * as React from 'react';\nimport {\n  Box,\n  IconButton,\n  ListItemIcon,\n  ListItemText,\n  MenuItem,\n  Popover,\n  Switch,\n} from '@mui/material';\nimport SettingsIcon from '@mui/icons-material/Settings';\nimport Brightness4Icon from '@mui/icons-material/Brightness4';\nimport Brightness7Icon from '@mui/icons-material/Brightness7';\nimport LogoutIcon from '@mui/icons-material/Logout';\nimport AccountTreeIcon from '@mui/icons-material/AccountTree';\nimport ManageSearchIcon from '@mui/icons-material/ManageSearch';\nimport Link from 'next/link';\nimport { useMutation, useQueryClient } from '@tanstack/react-query';\nimport { request } from 'graphql-request';\nimport { OutlineFrameworkForm, type OutlineFrameworkFormValues } from '@/components/OutlineFrameworkForm';\nimport { CREATE_OUTLINE_FRAMEWORK } from 'mutations/OutlineMutations';\nimport { useThemeToggleOptional } from '@/themes/ThemeToggleContext';\n\nimport { GRAPHQL_ENDPOINT } from '@/lib/config';\n\nconst ENDPOINT = GRAPHQL_ENDPOINT;\nconst DEFAULT_USER = 'rory.garcia1@gmail.com';\n\nexport interface SettingsPopoverProps {\n  /** When true, render only the icon (e.g. on projects page without SideNav). */\n  standalone?: boolean;\n}\n\nexport function SettingsPopover({ standalone = false }: SettingsPopoverProps) {\n  const themeContext = useThemeToggleOptional();\n  const isLightMode = themeContext?.isLightMode ?? true;\n  const onThemeToggle = themeContext ? () => themeContext.setTheme((p) => !p) : () => {};\n  const queryClient = useQueryClient();\n  const [anchorEl, setAnchorEl] = React.useState<HTMLElement | null>(null);\n  const [outlineFormOpen, setOutlineFormOpen] = React.useState(false);\n\n  const open = Boolean(anchorEl);\n\n  const handleClick = (event: React.MouseEvent<HTMLElement>) => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  const createOutlineMutation = useMutation({\n    mutationFn: async (variables: { input: any }) =>\n      request(ENDPOINT, CREATE_OUTLINE_FRAMEWORK, variables),\n    onSuccess: () => {\n      setOutlineFormOpen(false);\n      handleClose();\n      queryClient.invalidateQueries({ queryKey: ['outline-frameworks'] });\n    },\n  });\n\n  const handleCreateOutlineClick = () => {\n    handleClose();\n    setOutlineFormOpen(true);\n  };\n\n  const handleOutlineFormSubmit = (values: OutlineFrameworkFormValues) => {\n    const input = {\n      user: DEFAULT_USER,\n      name: values.formatName.trim(),\n      imageUrl: values.imageUrl.trim() || undefined,\n      format: {\n        name: values.formatName.trim(),\n        steps: values.steps.map((s) => ({\n          name: s.name,\n          number: s.number,\n          act: s.act,\n          instructions: s.instructions,\n        })),\n      },\n    };\n    createOutlineMutation.mutate({ input });\n  };\n\n  const handleSignOut = () => {\n    handleClose();\n    // Placeholder: wire to auth when implemented\n  };\n\n  return (\n    <>\n      <IconButton\n        onClick={handleClick}\n        color=\"inherit\"\n        aria-label=\"Settings\"\n        size=\"small\"\n        sx={standalone ? { ml: 'auto' } : undefined}\n      >\n        <SettingsIcon />\n      </IconButton>\n      <Popover\n        open={open}\n        anchorEl={anchorEl}\n        onClose={handleClose}\n        anchorOrigin={{ vertical: 'top', horizontal: 'right' }}\n        transformOrigin={{ vertical: 'top', horizontal: 'right' }}\n        PaperProps={{\n          sx: { minWidth: 220, mt: 1.5 },\n        }}\n      >\n        <Box sx={{ py: 1 }}>\n          <MenuItem disabled sx={{ cursor: 'default' }}>\n            <ListItemIcon>\n              {isLightMode ? <Brightness7Icon fontSize=\"small\" /> : <Brightness4Icon fontSize=\"small\" />}\n            </ListItemIcon>\n            <ListItemText\n              primary=\"Theme\"\n              secondary={isLightMode ? 'Light' : 'Dark'}\n              primaryTypographyProps={{ fontWeight: 600 }}\n            />\n            <Switch\n              checked={!isLightMode}\n              onChange={onThemeToggle}\n              size=\"small\"\n              color=\"primary\"\n            />\n          </MenuItem>\n          <MenuItem component={Link} href=\"/outlines\" onClick={handleClose} sx={{ textDecoration: 'none', color: 'inherit' }}>\n            <ListItemIcon>\n              <ManageSearchIcon fontSize=\"small\" />\n            </ListItemIcon>\n            <ListItemText primary=\"Manage outlines\" />\n          </MenuItem>\n          <MenuItem onClick={handleCreateOutlineClick}>\n            <ListItemIcon>\n              <AccountTreeIcon fontSize=\"small\" />\n            </ListItemIcon>\n            <ListItemText primary=\"Create outline framework\" />\n          </MenuItem>\n          <MenuItem onClick={handleSignOut}>\n            <ListItemIcon>\n              <LogoutIcon fontSize=\"small\" />\n            </ListItemIcon>\n            <ListItemText primary=\"Sign out\" />\n          </MenuItem>\n        </Box>\n      </Popover>\n      <OutlineFrameworkForm\n        open={outlineFormOpen}\n        onClose={() => setOutlineFormOpen(false)}\n        onSubmit={handleOutlineFormSubmit}\n        submitLabel=\"Create framework\"\n        submitting={createOutlineMutation.isPending}\n      />\n    </>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 729, "column": 0}, "map": {"version":3,"sources":["file:///Users/dane/Development/writual_client/apps/web/src/components/ProjectCard/ProjectCard.tsx"],"sourcesContent":["'use client';\n\nimport * as React from 'react';\nimport { useRouter } from 'next/navigation';\nimport Card from '@mui/material/Card';\nimport CardMedia from '@mui/material/CardMedia';\nimport CardContent from '@mui/material/CardContent';\nimport Typography from '@mui/material/Typography';\nimport IconButton from '@mui/material/IconButton';\nimport Button from '@mui/material/Button';\nimport Popover from '@mui/material/Popover';\nimport TextField from '@mui/material/TextField';\nimport Box from '@mui/material/Box';\nimport List from '@mui/material/List';\nimport ListItem from '@mui/material/ListItem';\nimport ListItemText from '@mui/material/ListItemText';\nimport PersonAddIcon from '@mui/icons-material/PersonAdd';\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport { useTheme } from '@mui/material/styles';\nimport { useMutation, useQueryClient } from '@tanstack/react-query';\nimport { request } from 'graphql-request';\nimport { UPDATE_PROJECT_SHARED_WITH } from 'mutations/ProjectMutations';\n\nimport { GRAPHQL_ENDPOINT } from '@/lib/config';\n\nconst endpoint = GRAPHQL_ENDPOINT;\nconst EMAIL_REGEX = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\nfunction isValidEmail(email: string): boolean {\n  return EMAIL_REGEX.test(email.trim());\n}\n\ninterface ProgressItem {\n  label: string;\n  status: 'complete' | 'partial' | 'empty';\n}\n\ninterface ProjectCardProps {\n  title: string;\n  author: string;\n  genre: string;\n  logline: string;\n  coverImage?: string;\n  progress?: ProgressItem[];\n  maxWidth?: string | number;\n  maxHeight?: string | number;\n  enableCardShadow?: boolean;\n  onDelete?: () => void;\n  projectId?: string;\n  sharedWith?: string[];\n  /** When set, clicking the card (not Share/Delete) navigates to this path */\n  to?: string;\n}\n\nconst getStatusColor = (status: 'complete' | 'partial' | 'empty') => {\n  switch (status) {\n    case 'complete':\n      return '#4caf50';\n    case 'partial':\n      return 'transparent';\n    case 'empty':\n      return 'transparent';\n    default:\n      return 'transparent';\n  }\n};\n\nconst ProgressDot = ({ status }: { status: 'complete' | 'partial' | 'empty' }) => (\n  <Box\n    sx={{\n      width: 12,\n      height: 12,\n      borderRadius: '50%',\n      backgroundColor: getStatusColor(status),\n      border: status !== 'complete' ? '2px solid #9e9e9e' : 'none',\n      background:\n        status === 'partial'\n          ? 'linear-gradient(90deg, #4caf50 50%, transparent 50%)'\n          : getStatusColor(status),\n    }}\n  />\n);\n\nexport const ProjectCard: React.FC<ProjectCardProps> = ({\n  title,\n  author,\n  genre,\n  logline,\n  coverImage,\n  maxWidth,\n  maxHeight,\n  enableCardShadow = true,\n  onDelete,\n  projectId,\n  sharedWith: sharedWithProp = [],\n  to,\n  progress = [\n    { label: 'Title', status: 'complete' },\n    { label: 'Logline', status: 'complete' },\n    { label: 'Characters', status: 'complete' },\n    { label: 'Treatment', status: 'partial' },\n    { label: 'Outline', status: 'partial' },\n    { label: 'Screenplay', status: 'complete' },\n  ],\n}) => {\n  const router = useRouter();\n  const theme = useTheme();\n  const queryClient = useQueryClient();\n  const [shareAnchorEl, setShareAnchorEl] = React.useState<HTMLElement | null>(null);\n\n  const handleCardClick = (e: React.MouseEvent) => {\n    console.log('to: ', to)\n    if (!to) return;\n    // Only navigate if the click wasn't on a button/link (they use stopPropagation)\n    const target = e.target as HTMLElement;\n    console.log('target: ', target.closest)\n   \n    e.preventDefault();\n    router.push(to);\n  };\n  const [newEmail, setNewEmail] = React.useState('');\n  const [emailError, setEmailError] = React.useState('');\n\n  const sharedWith = Array.isArray(sharedWithProp) ? sharedWithProp : [];\n\n  const updateSharedWithMutation = useMutation({\n    mutationFn: (sharedWith: string[]) =>\n      request(endpoint, UPDATE_PROJECT_SHARED_WITH, { projectId, sharedWith }),\n    onSuccess: () => {\n      if (projectId) {\n        queryClient.invalidateQueries({ queryKey: ['project', projectId] });\n        queryClient.invalidateQueries({ queryKey: ['projects'] });\n      }\n    },\n  });\n\n  const doAddShareEmail = () => {\n    const trimmed = newEmail.trim();\n    if (!trimmed) return;\n    if (!isValidEmail(trimmed)) {\n      setEmailError('Enter a valid email address.');\n      return;\n    }\n    if (sharedWith.includes(trimmed)) {\n      setEmailError('Already shared with this email.');\n      return;\n    }\n    setEmailError('');\n    setNewEmail('');\n    updateSharedWithMutation.mutate([...sharedWith, trimmed]);\n  };\n\n  const handleAddShareEmail = (e: React.MouseEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    doAddShareEmail();\n  };\n\n  const handleRemoveShareEmail = (e: React.MouseEvent, email: string) => {\n    e.preventDefault();\n    e.stopPropagation();\n    updateSharedWithMutation.mutate(sharedWith.filter((e) => e !== email));\n  };\n\n  const defaultImage =\n    typeof process !== 'undefined' && process.env.NODE_ENV === 'development'\n      ? '/dev_image.png'\n      : 'https://m.media-amazon.com/images/I/513WUcomv-L._AC_UF1000,1000_QL80_.jpg';\n  const imageSrc = coverImage?.trim() ? coverImage : defaultImage;\n\n  return (\n    <Card\n      role={to ? 'button' : undefined}\n      tabIndex={to ? 0 : undefined}\n      onKeyDown={to ? (e) => { if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); router.push(to); } } : undefined}\n      onClick={handleCardClick}\n      elevation={enableCardShadow ? 1 : 0}\n      sx={{\n        display: 'flex',\n        maxWidth: maxWidth || 500,\n        maxHeight: maxHeight || 250,\n        borderRadius: 2,\n        boxShadow: enableCardShadow ? '0 2px 8px rgba(0,0,0,0.1)' : 'none',\n        overflow: 'hidden',\n        ...(to ? { cursor: 'pointer', '&:hover': { boxShadow: 3 }, transition: 'box-shadow 0.2s ease' } : {}),\n      }}\n    >\n      <CardMedia\n        component=\"img\"\n        sx={{ p:1, width: 150, height: 'max-content', objectFit: 'cover', borderRadius: 4  }}\n        image={imageSrc}\n        alt={`${title} cover`}\n      />\n      <Box sx={{ display: 'flex', flexDirection: 'column', flex: 1, position: 'relative' }}>\n        <Box sx={{ position: 'absolute', top: 8, right: 8, display: 'flex', gap: 0.5, alignItems: 'center' }}>\n          {projectId ? (\n            <>\n              <Button\n                variant=\"outlined\"\n                size=\"small\"\n                startIcon={<PersonAddIcon />}\n                onClick={(e) => { e.preventDefault(); e.stopPropagation(); setShareAnchorEl(e.currentTarget); }}\n                sx={{ minWidth: 'auto', py: 0.25, px: 1 }}\n                data-no-navigate\n              >\n                Share Project\n              </Button>\n              <Popover\n                open={Boolean(shareAnchorEl)}\n                anchorEl={shareAnchorEl}\n                onClose={() => { setShareAnchorEl(null); setEmailError(''); setNewEmail(''); }}\n                anchorOrigin={{ vertical: 'bottom', horizontal: 'right' }}\n                transformOrigin={{ vertical: 'top', horizontal: 'right' }}\n                onClick={(e) => e.stopPropagation()}\n              >\n                <Box sx={{ p: 2, minWidth: 320, maxWidth: 400 }} onClick={(e) => e.stopPropagation()}>\n                  <Typography variant=\"subtitle2\" color=\"text.secondary\" gutterBottom>\n                    Shared with\n                  </Typography>\n                  {sharedWith.length === 0 ? (\n                    <Typography variant=\"body2\" color=\"text.secondary\">\n                      Not shared with anyone yet.\n                    </Typography>\n                  ) : (\n                    <List dense sx={{ py: 0, maxHeight: 200, overflow: 'auto' }}>\n                      {sharedWith.map((email) => (\n                        <ListItem\n                          key={email}\n                          secondaryAction={\n                            <IconButton\n                              edge=\"end\"\n                              size=\"small\"\n                              aria-label={`Remove ${email}`}\n                              onClick={(ev) => handleRemoveShareEmail(ev, email)}\n                            >\n                              <DeleteIcon fontSize=\"small\" />\n                            </IconButton>\n                          }\n                        >\n                          <ListItemText primary={email} primaryTypographyProps={{ variant: 'body2' }} />\n                        </ListItem>\n                      ))}\n                    </List>\n                  )}\n                  <Box sx={{ display: 'flex', gap: 1, mt: 2, alignItems: 'flex-start' }}>\n                    <TextField\n                      size=\"small\"\n                      placeholder=\"Add email\"\n                      value={newEmail}\n                      onChange={(e) => { setNewEmail(e.target.value); setEmailError(''); }}\n                      onKeyDown={(e) => e.key === 'Enter' && (e.preventDefault(), doAddShareEmail())}\n                      error={Boolean(emailError)}\n                      helperText={emailError}\n                      fullWidth\n                    />\n                    <Button variant=\"contained\" size=\"small\" onClick={handleAddShareEmail}>\n                      Add\n                    </Button>\n                  </Box>\n                </Box>\n              </Popover>\n            </>\n          ) : null}\n          {onDelete && (\n            <IconButton\n              aria-label=\"Delete project\"\n              size=\"small\"\n              data-no-navigate\n              onClick={(e) => {\n                e.preventDefault();\n                e.stopPropagation();\n                onDelete();\n              }}\n              sx={{\n                backgroundColor: theme.palette.error.light,\n                color: theme.palette.error.contrastText ?? theme.palette.common.white,\n                '&:hover': {\n                  backgroundColor: theme.palette.error.main,\n                },\n              }}\n            >\n              <DeleteIcon fontSize=\"small\" />\n            </IconButton>\n          )}\n        </Box>\n        <CardContent sx={{ flex: '1 0 auto', pt: 2, p: 1}}>\n          <Typography variant=\"h6\" component=\"div\" sx={{ fontWeight: 'bold' }}>\n            {title}\n          </Typography>\n          <Typography variant=\"body2\" color=\"text.secondary\">\n            by {author}\n          </Typography>\n          <Typography variant=\"body2\" sx={{ mt: 1, overflow: 'hidden',\n        textOverflow: 'ellipsis',\n        display: '-webkit-box',\n        WebkitLineClamp: 3, // Set the maximum number of lines here\n        WebkitBoxOrient: 'vertical', }}>\n            {logline}\n          </Typography>\n          <Typography variant=\"body2\" sx={{ mt: 1 }}>\n            Genre: {genre}\n          </Typography>\n          <Typography variant=\"body2\" sx={{ mt: 1.5, fontWeight: 500 }}>\n            Development Progress:\n          </Typography>\n          <Box sx={{ display: 'flex', flexWrap: 'wrap', gap: 1.5, mt: 1, alignItems: 'center' }}>\n            {progress.map((item) => (\n              <Box key={item.label} sx={{ display: 'flex', flexDirection: 'column-reverse', alignItems: 'center', gap: 0.5 }}>\n                <Typography variant=\"caption\" sx={{ color: 'text.secondary' }}>\n                  {item.label}\n                </Typography>\n                <ProgressDot status={item.status} />\n              </Box>\n            ))}\n          </Box>\n        </CardContent>\n      </Box>\n    </Card>\n  );\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1308, "column": 0}, "map": {"version":3,"sources":["file:///Users/dane/Development/writual_client/apps/web/src/components/ProjectCard/index.ts"],"sourcesContent":["export * from './ProjectCard';\n"],"names":[],"mappings":";AAAA"}},
    {"offset": {"line": 1315, "column": 0}, "map": {"version":3,"sources":["file:///Users/dane/Development/writual_client/apps/web/src/queries/ProjectQueries.ts"],"sourcesContent":["import { gql } from \"graphql-request\";\n\nexport const PROJECTS_QUERY = gql`\n{\n  getProjectData(input: {user: \"rory.garcia1@gmail.com\"}) {\n    _id\n    title\n    genre\n    type\n    logline\n    user\n    poster\n    sharedWith\n    \n    outline {\n      format {\n        name\n      }\n    }\n  }\n}\n`;\n\nexport const PROJECT_QUERY = gql`\nquery GetProjectData($input: ProjectFilters) {\n    getProjectData(input: $input) {\n        _id\n        title\n        genre\n        type\n        logline\n        user\n        poster\n        sharedWith\n        characters {\n          details {\n            age\n            bio\n            gender\n            need\n            version\n            want\n         }\n         imageUrl\n        name\n        }\n        scenes {\n            number\n            activeVersion\n            projectId\n            versions {\n                act\n                antithesis\n                step\n                synopsis\n                synthesis\n                thesis\n                version\n                sceneHeading\n                locked\n            }\n        }\n        outline {\n        format {\n            name\n        }\n        }\n    }\n}\n`;"],"names":[],"mappings":";;;;;;AAAA;;AAEO,MAAM,iBAAiB,0QAAG,CAAC;;;;;;;;;;;;;;;;;;;AAmBlC,CAAC;AAEM,MAAM,gBAAgB,0QAAG,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8CjC,CAAC"}},
    {"offset": {"line": 1394, "column": 0}, "map": {"version":3,"sources":["file:///Users/dane/Development/writual_client/apps/web/src/queries/SceneQueries.ts"],"sourcesContent":["import { gql } from 'graphql-request';\n\nexport const PROJECT_SCENES_QUERY = gql`\n  query GetProjectScenes($input: ProjectFilters) {\n    getProjectData(input: $input) {\n      _id\n      scenes {\n        number\n        activeVersion\n        lockedVersion\n        projectId\n        versions {\n          act\n          antithesis\n          step\n          synopsis\n          synthesis\n          thesis\n          version\n          sceneHeading\n        }\n      }\n    }\n  }\n`;"],"names":[],"mappings":";;;;AAAA;;AAEO,MAAM,uBAAuB,0QAAG,CAAC;;;;;;;;;;;;;;;;;;;;;;AAsBxC,CAAC"}},
    {"offset": {"line": 1427, "column": 0}, "map": {"version":3,"sources":["file:///Users/dane/Development/writual_client/apps/web/src/queries/CharacterQueries.ts"],"sourcesContent":["import { gql } from \"graphql-request\";\n\nexport const PROJECT_CHARACTERS_QUERY = gql`\nquery GetProjectCharacters($input: ProjectFilters) {\n  getProjectData(input: $input) {\n    _id\n    characters {\n      name\n      imageUrl\n      details {\n        version\n        gender\n        age\n        bio\n        need\n        want\n      }\n    }\n  }\n}\n`;\n\n"],"names":[],"mappings":";;;;AAAA;;AAEO,MAAM,2BAA2B,0QAAG,CAAC;;;;;;;;;;;;;;;;;;AAkB5C,CAAC"}},
    {"offset": {"line": 1456, "column": 0}, "map": {"version":3,"sources":["file:///Users/dane/Development/writual_client/apps/web/src/queries/index.ts"],"sourcesContent":["export * from \"./ProjectQueries\"\nexport * from \"./SceneQueries\"\nexport * from \"./CharacterQueries\"\nexport * from \"./OutlineQueries\""],"names":[],"mappings":";AAAA;AACA;AACA;AACA"}},
    {"offset": {"line": 1469, "column": 0}, "map": {"version":3,"sources":["file:///Users/dane/Development/writual_client/apps/web/src/components/Projects.tsx"],"sourcesContent":["'use client';\n\nimport { Button } from \"@mui/material\";\nimport { Box } from \"@mui/system\";\nimport { ProjectCard } from \"./ProjectCard\";\nimport AddIcon from '@mui/icons-material/Add';\nimport React, { useEffect } from \"react\";\nimport { useCreateProjectModalStore } from '@/state/createProjectModal';\nimport { useMutation, useQuery, useQueryClient } from \"@tanstack/react-query\";\nimport { request } from \"graphql-request\";\nimport { PROJECTS_QUERY } from \"../queries\";\nimport { DELETE_PROJECT } from 'mutations/ProjectMutations';\nimport { GRAPHQL_ENDPOINT } from '@/lib/config';\n\nconst endpoint = GRAPHQL_ENDPOINT;\n\n\nexport const Projects = () => {\n    const queryClient = useQueryClient();\n\n    const openCreateProjectModal = useCreateProjectModalStore((s) => s.openModal)\n\n    const { data }: any = useQuery({ queryKey: ['projects'], queryFn: async () => request(endpoint, PROJECTS_QUERY) })\n\n    const deleteProjectMutation = useMutation({\n        mutationFn: (deleteProjectId: string) =>\n          request(endpoint, DELETE_PROJECT, { deleteProjectId }),\n        onSuccess: () => {\n          queryClient.invalidateQueries({ queryKey: ['projects'] });\n        },\n      });\n    \n\n    return (\n        <>\n        <Box sx={{ display: 'flex', justifyContent: 'center', paddingTop: 2, paddingBottom: 2 }}>\n                    <Button\n                    variant=\"contained\"\n                    color=\"primary\"\n                    startIcon={<AddIcon />}\n                    onClick={openCreateProjectModal}\n                    >\n                    Create Project\n                    </Button>\n                </Box>\n\n                <Box\n                    sx={{\n                    height: '100%',\n                    paddingTop: 5,\n                    overflowY: 'scroll',\n                    display: 'flex',\n                    justifyContent: 'space-evenly',\n                    flexWrap: 'wrap',\n                    gap: 2,\n                    }}\n                >\n                    {data?.getProjectData?.map((project: any, index: number) => (\n                    <Box\n                        key={project._id ?? index}\n                        sx={{  marginTop: '20px', flexShrink: 0 }}\n                    >\n                        <ProjectCard\n                        title={project.title}\n                        author={project.user}\n                        genre={project.genre}\n                        logline={project.logline}\n                        coverImage={project.coverImage ?? project.poster}\n                        onDelete={project._id ? () => deleteProjectMutation.mutate(project._id) : undefined}\n                        projectId={project._id}\n                        sharedWith={project.sharedWith ?? []}\n                        to={project._id ? `/project/${project._id}` : undefined}\n                        />\n                    </Box>\n                    ))}\n                </Box>\n        </>\n    )\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AACA;AAEA;AACA;AAAA;AAAA;AACA;AACA;AAAA;AACA;AACA;AAZA;;;;;;;;;;;;AAcA,MAAM,WAAW,uJAAgB;AAG1B,MAAM,WAAW;IACpB,MAAM,cAAc,IAAA,ySAAc;IAElC,MAAM,yBAAyB,IAAA,+KAA0B,EAAC,CAAC,IAAM,EAAE,SAAS;IAE5E,MAAM,EAAE,IAAI,EAAE,GAAQ,IAAA,wRAAQ,EAAC;QAAE,UAAU;YAAC;SAAW;QAAE,SAAS,UAAY,IAAA,8QAAO,EAAC,UAAU,iKAAc;IAAE;IAEhH,MAAM,wBAAwB,IAAA,8RAAW,EAAC;QACtC,YAAY,CAAC,kBACX,IAAA,8QAAO,EAAC,UAAU,qKAAc,EAAE;gBAAE;YAAgB;QACtD,WAAW;YACT,YAAY,iBAAiB,CAAC;gBAAE,UAAU;oBAAC;iBAAW;YAAC;QACzD;IACF;IAGF,qBACI;;0BACA,4cAAC,8YAAG;gBAAC,IAAI;oBAAE,SAAS;oBAAQ,gBAAgB;oBAAU,YAAY;oBAAG,eAAe;gBAAE;0BAC1E,cAAA,4cAAC,4ZAAM;oBACP,SAAQ;oBACR,OAAM;oBACN,yBAAW,4cAAC,sXAAO;;;;;oBACnB,SAAS;8BACR;;;;;;;;;;;0BAKL,4cAAC,8YAAG;gBACA,IAAI;oBACJ,QAAQ;oBACR,YAAY;oBACZ,WAAW;oBACX,SAAS;oBACT,gBAAgB;oBAChB,UAAU;oBACV,KAAK;gBACL;0BAEC,MAAM,gBAAgB,IAAI,CAAC,SAAc,sBAC1C,4cAAC,8YAAG;wBAEA,IAAI;4BAAG,WAAW;4BAAQ,YAAY;wBAAE;kCAExC,cAAA,4cAAC,8KAAW;4BACZ,OAAO,QAAQ,KAAK;4BACpB,QAAQ,QAAQ,IAAI;4BACpB,OAAO,QAAQ,KAAK;4BACpB,SAAS,QAAQ,OAAO;4BACxB,YAAY,QAAQ,UAAU,IAAI,QAAQ,MAAM;4BAChD,UAAU,QAAQ,GAAG,GAAG,IAAM,sBAAsB,MAAM,CAAC,QAAQ,GAAG,IAAI;4BAC1E,WAAW,QAAQ,GAAG;4BACtB,YAAY,QAAQ,UAAU,IAAI,EAAE;4BACpC,IAAI,QAAQ,GAAG,GAAG,CAAC,SAAS,EAAE,QAAQ,GAAG,EAAE,GAAG;;;;;;uBAZzC,QAAQ,GAAG,IAAI;;;;;;;;;;;;AAmB5C"}}]
}