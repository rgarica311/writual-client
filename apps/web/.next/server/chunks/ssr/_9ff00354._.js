module.exports=[23304,30340,50584,a=>{"use strict";var b=a.i(2320),c=a.i(39337),d=a.i(99220),e=a.i(63624),f=a.i(61857),g=a.i(70793),h=a.i(21620),i=a.i(5247);function j(a){return(0,i.default)("MuiCard",a)}(0,h.default)("MuiCard",["root"]);var k=a.i(65886);let l=(0,e.styled)(g.default,{name:"MuiCard",slot:"Root"})({overflow:"hidden"}),m=b.forwardRef(function(a,b){let e=(0,f.useDefaultProps)({props:a,name:"MuiCard"}),{className:g,raised:h=!1,...i}=e,m={...e,raised:h},n=(a=>{let{classes:b}=a;return(0,d.default)({root:["root"]},j,b)})(m);return(0,k.jsx)(l,{className:(0,c.default)(n.root,g),elevation:h?8:void 0,ref:b,ownerState:m,...i})});function n(a){return(0,i.default)("MuiCardMedia",a)}a.s(["default",0,m],23304),(0,h.default)("MuiCardMedia",["root","media","img"]);let o=(0,e.styled)("div",{name:"MuiCardMedia",slot:"Root",overridesResolver:(a,b)=>{let{ownerState:c}=a,{isMediaComponent:d,isImageComponent:e}=c;return[b.root,d&&b.media,e&&b.img]}})({display:"block",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center",variants:[{props:{isMediaComponent:!0},style:{width:"100%"}},{props:{isImageComponent:!0},style:{objectFit:"cover"}}]}),p=["video","audio","picture","iframe","img"],q=["picture","img"],r=b.forwardRef(function(a,b){let e=(0,f.useDefaultProps)({props:a,name:"MuiCardMedia"}),{children:g,className:h,component:i="div",image:j,src:l,style:m,...r}=e,s=p.includes(i),t=!s&&j?{backgroundImage:`url("${j}")`,...m}:m,u={...e,component:i,isMediaComponent:s,isImageComponent:q.includes(i)},v=(a=>{let{classes:b,isMediaComponent:c,isImageComponent:e}=a;return(0,d.default)({root:["root",c&&"media",e&&"img"]},n,b)})(u);return(0,k.jsx)(o,{className:(0,c.default)(v.root,h),as:i,role:!s&&j?"img":void 0,ref:b,style:t,ownerState:u,src:s?j||l:void 0,...r,children:g})});function s(a){return(0,i.default)("MuiCardContent",a)}a.s(["default",0,r],30340),(0,h.default)("MuiCardContent",["root"]);let t=(0,e.styled)("div",{name:"MuiCardContent",slot:"Root"})({padding:16,"&:last-child":{paddingBottom:24}}),u=b.forwardRef(function(a,b){let e=(0,f.useDefaultProps)({props:a,name:"MuiCardContent"}),{className:g,component:h="div",...i}=e,j={...e,component:h},l=(a=>{let{classes:b}=a;return(0,d.default)({root:["root"]},s,b)})(j);return(0,k.jsx)(t,{as:h,className:(0,c.default)(l.root,g),ownerState:j,ref:b,...i})});a.s(["default",0,u],50584)},79437,(a,b,c)=>{function d(a,b=100,c={}){let e,f,g,h,i;if("function"!=typeof a)throw TypeError(`Expected the first parameter to be a function, got \`${typeof a}\`.`);if(b<0)throw RangeError("`wait` must not be negative.");let{immediate:j}="boolean"==typeof c?{immediate:c}:c;function k(){let b=e,c=f;return e=void 0,f=void 0,i=a.apply(b,c)}function l(){let a=Date.now()-h;a<b&&a>=0?g=setTimeout(l,b-a):(g=void 0,j||(i=k()))}let m=function(...a){if(e&&this!==e&&Object.getPrototypeOf(this)===Object.getPrototypeOf(e))throw Error("Debounced method called with different contexts of the same prototype.");e=this,f=a,h=Date.now();let c=j&&!g;return g||(g=setTimeout(l,b)),c&&(i=k()),i};return Object.defineProperty(m,"isPending",{get:()=>void 0!==g}),m.clear=()=>{g&&(clearTimeout(g),g=void 0)},m.flush=()=>{g&&m.trigger()},m.trigger=()=>{i=k(),m.clear()},m}b.exports.debounce=d,b.exports=d},38912,23145,33425,11883,a=>{"use strict";a.i(73613);var b=a.i(79437),c=a.i(2320);a.s(["useDebounce",0,a=>{let d=(0,c.useRef)(null);return(0,c.useEffect)(()=>{d.current=a},[a]),(0,c.useMemo)((...a)=>(0,b.default)((...a)=>{d.current?.(...a)},1e3),[])}],23145);var d=a.i(68581),e=a.i(44633),f=a.i(31316);let g=f.gql`
  mutation CreateScene(
    $versions: [SceneContentInput]
    $_id: String
  ) {
    createScene(
      input: {
        _id: $_id
        versions: $versions
      }
    ) {
      number
    }
  }
`,h=f.gql`
  mutation UpdateScene(
    $_id: String!
    $number: Int
    $activeVersion: Int
    $lockedVersion: Int
    $newVersion: Boolean
    $newScene: Boolean
    $versions: [SceneContentInput]
  ) {
    createScene(
      input: {
        _id: $_id
        number: $number
        activeVersion: $activeVersion
        lockedVersion: $lockedVersion
        newVersion: $newVersion
        newScene: $newScene
        versions: $versions
      }
    ) {
      number
    }
  }
`;a.s(["CREATE_SCENE",0,g,"UPDATE_SCENE",0,h],33425);let i=f.gql`
  mutation DeleteScene($projectId: String!, $sceneNumber: Int!) {
    deleteScene(projectId: $projectId, sceneNumber: $sceneNumber) {
      id
      scenes {
        number
      }
    }
  }
`;var j=a.i(24460);let k="project-scenes";function l(){let a=(0,e.useQueryClient)(),b=(0,d.useMutation)({mutationFn:async a=>(0,f.request)(j.GRAPHQL_ENDPOINT,h,{_id:a._id,number:a.number,activeVersion:a.activeVersion,lockedVersion:a.lockedVersion??void 0,newVersion:a.newVersion,newScene:!1,versions:a.versions}),onSuccess:(b,c)=>{c._id&&a.invalidateQueries({queryKey:[k,c._id]})}});return{updateSceneMutation:b,deleteSceneMutation:(0,d.useMutation)({mutationFn:async a=>(0,f.request)(j.GRAPHQL_ENDPOINT,i,{projectId:a._id,sceneNumber:a.number}),onSuccess:(b,c)=>{c._id&&a.invalidateQueries({queryKey:[k,c._id]})}}),createSceneMutation:(0,d.useMutation)({mutationFn:async a=>(0,f.request)(j.GRAPHQL_ENDPOINT,g,{_id:a._id,versions:a.versions,number:a.number}),onSuccess:(b,c)=>{c._id&&a.invalidateQueries({queryKey:[k,c._id]})}})}}a.s(["PROJECT_SCENES_QUERY_KEY",0,k,"useProjectSceneMutations",()=>l],11883),a.s([],38912)},49056,a=>{"use strict";var b=a.i(65886),c=a.i(45388),d=a.i(35969),e=a.i(8191),f=a.i(6600),f=f,g=a.i(42769),h=a.i(16164),i=a.i(2320),j=a.i(79374);let k=(0,a.i(58416).create)(a=>({number:1,versions:[],editMode:!1,activeVersion:0,activeStep:"",activeScene:1,sceneContent:{thesis:"",antithesis:"",synthesis:"",synopsis:"",sceneHeading:"",step:"",version:0},createStatement:"",newVersion:!1,versionOptions:[],setVersionOptions:b=>a({versionOptions:b}),handleSave:()=>{},setHandleSave:b=>a({handleSave:b}),setNewVersion:b=>a({newVersion:b}),setCreateStatement:b=>a({createStatement:b}),setSceneContent:b=>a({sceneContent:b}),setActiveScene:b=>a({activeScene:b}),setEditMode:b=>a({editMode:b}),setActiveVersion:b=>a({activeVersion:b}),setActiveStep:b=>a({activeStep:b})}));a.i(38912);var l=a.i(23145),m=a.i(33425),n=a.i(73613),o=a.i(80266),p=a.i(1690),q=a.i(81310);a.i(25854);var r=a.i(26379),s=a.i(23304),t=a.i(50584),u=a.i(30340),v=a.i(31820),w=a.i(13032),x=f,y=a.i(87850),z=a.i(94848),A=a.i(14270),B=a.i(11440);let C=(0,B.default)((0,b.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"}),"MoreVert"),D=(0,B.default)((0,b.jsx)("path",{d:"M8 5v14l11-7z"}),"PlayArrow"),E={note:"Note",link:"Link",image:"Image",video:"Video"},F=[{value:"characters",label:"Character"},{value:"outline",label:"Outline"},{value:"treatment",label:"Treatment"},{value:"chat",label:"Chat"}];function G({data:a,onMoveTo:c}){let[d,e]=i.useState(null),f=!!d,g=()=>e(null),h=E[a.type]??a.type;return(0,b.jsxs)(s.default,{variant:"outlined",sx:{height:"100%",minHeight:140,display:"flex",flexDirection:"column",borderRadius:2,borderColor:"divider",backgroundColor:"background.paper"},children:[(0,b.jsxs)(z.default,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",px:1.5,pt:1},children:[(0,b.jsxs)(v.default,{variant:"caption",color:"text.secondary",fontWeight:600,children:[h,":"]}),(0,b.jsx)(w.default,{size:"small",onClick:a=>{a.stopPropagation(),e(a.currentTarget)},"aria-label":"Move content","aria-haspopup":"true","aria-expanded":f?"true":void 0,children:(0,b.jsx)(C,{fontSize:"small"})})]}),(0,b.jsxs)(x.default,{anchorEl:d,open:f,onClose:g,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:[(0,b.jsx)(v.default,{variant:"caption",sx:{px:2,py:.5,color:"text.secondary"},children:"Move to"}),F.map(a=>(0,b.jsx)(y.default,{onClick:()=>{var b;return b=a.value,void(c?.(b),g())},children:a.label},a.value))]}),(0,b.jsxs)(t.default,{sx:{flex:1,pt:0,pb:1,overflow:"hidden",display:"flex",flexDirection:"column"},children:["note"===a.type&&(0,b.jsx)(v.default,{variant:"body2",color:"text.primary",sx:{overflow:"auto",flex:1},children:a.text||"—"}),"link"===a.type&&(0,b.jsxs)(z.default,{sx:{overflow:"auto",flex:1},children:[(0,b.jsx)(A.default,{href:a.url,target:"_blank",rel:"noopener noreferrer",variant:"body2",underline:"hover",sx:{wordBreak:"break-all"},children:a.label||a.url||"—"}),a.label&&a.url&&a.url!==a.label&&(0,b.jsx)(v.default,{variant:"caption",color:"text.secondary",display:"block",sx:{mt:.5},children:a.url})]}),"image"===a.type&&(0,b.jsxs)(z.default,{sx:{flex:1,minHeight:80,display:"flex",flexDirection:"column"},children:[a.src?(0,b.jsx)(u.default,{component:"img",image:a.src,alt:a.caption||"Image",sx:{objectFit:"cover",borderRadius:1,maxHeight:120,flex:1}}):(0,b.jsx)(z.default,{sx:{flex:1,bgcolor:"action.hover",borderRadius:1,display:"flex",alignItems:"center",justifyContent:"center",minHeight:80},children:(0,b.jsx)(v.default,{variant:"caption",color:"text.secondary",children:"No image"})}),a.caption&&(0,b.jsx)(v.default,{variant:"caption",color:"text.secondary",sx:{mt:.5},children:a.caption})]}),"video"===a.type&&(0,b.jsxs)(z.default,{sx:{flex:1,minHeight:80,display:"flex",flexDirection:"column"},children:[a.src?(0,b.jsxs)(z.default,{sx:{position:"relative",borderRadius:1,overflow:"hidden",bgcolor:"action.hover",flex:1,minHeight:80},children:[(0,b.jsx)(u.default,{component:"img",image:a.src,alt:a.caption||"Video",sx:{objectFit:"cover",width:"100%",maxHeight:120}}),(0,b.jsx)(z.default,{sx:{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"rgba(0,0,0,0.3)"},children:(0,b.jsx)(D,{sx:{fontSize:48,color:"common.white"}})})]}):(0,b.jsx)(z.default,{sx:{flex:1,bgcolor:"action.hover",borderRadius:1,display:"flex",alignItems:"center",justifyContent:"center",minHeight:80},children:(0,b.jsx)(D,{sx:{fontSize:40,color:"text.disabled"}})}),a.caption&&(0,b.jsx)(v.default,{variant:"caption",color:"text.secondary",sx:{mt:.5},children:a.caption})]})]})]})}let H=[{id:"1",type:"note",text:"A retired detective must find a missing android who holds the key to his own past."},{id:"2",type:"note",text:"A lone pilot discovers a signal from a colony thought lost decades ago."},{id:"3",type:"link",url:"https://example.com/reference-material",label:"Reference: world-building doc"},{id:"4",type:"link",url:"https://example.com/visual-mood",label:"Visual mood board"},{id:"5",type:"image",src:"/logo_symbol.png",caption:"Mood: neon city"},{id:"6",type:"image",src:"/logo_4.png",caption:"Character concept"},{id:"7",type:"video",src:"/logo_symbol.png",caption:"Pitch reel placeholder"}];function I(){k(a=>a.setEditMode),k(a=>a.activeStep),k(a=>a.setActiveStep),k(a=>a.setActiveScene);let a=k(a=>a.activeVersion);k(a=>a.setActiveVersion);let s=k(a=>a.setNewVersion),t=k(a=>a.setHandleSave),u=k(a=>a.createStatement),v=k(a=>a.setCreateStatement);k(a=>a.versionOptions);let w=k(a=>a.setVersionOptions),[x,y]=(0,i.useState)(),[z,A]=(0,i.useState)(),[B,C]=(0,i.useState)(!0),[D,E]=(0,i.useState)(!0),[F,I]=(0,i.useState)([]),[J,K]=(0,i.useState)([]),[L,M]=(0,i.useState)(0),[N,O]=(0,i.useState)(0),[P,Q]=(0,i.useState)(""),[R,S]=(0,i.useState)(0),[T,U]=(0,i.useState)(H),[V,W]=(0,i.useState)(null);(0,q.useParams)().id;let X={createStatement:m.UPDATE_SCENE,createVariables:z,invalidateQueriesArray:["projects"],stateResetters:{setCreateStatement:v,setCreateVariables:A,setVersionOptions:w,setNewVersion:s}},Y={createStatement:m.CREATE_SCENE,createVariables:z,invalidateQueriesArray:["projects"],stateResetters:{setCreateStatement:v,setCreateVariables:A}},Z=(0,o.createMutation)(Y);(0,n.useCreateMutation)(u,z,Z,p.GqlStatements.CREATE_SCENE);let $=(0,o.createMutation)(X);(0,n.useCreateMutation)(u,x,$,p.GqlStatements.UPDATE_SCENE);let _=(0,l.useDebounce)((b,c,d,e,f,g,h,i)=>{c&&(v(m.CREATE_SCENE),A({act:R,projectId:d,newVersion:b,number:e,activeVersion:a,newScene:c,versions:[{act:R,[h]:i,step:g}]}))});(0,i.useEffect)(()=>{t(_)},[_]);let aa=a=>{U(b=>[...b,function(a){let b=`new-${Date.now()}`;switch(a){case"note":default:return{id:b,type:"note",text:"New note…"};case"link":return{id:b,type:"link",url:"",label:"New link"};case"image":return{id:b,type:"image",caption:"New image"};case"video":return{id:b,type:"video",caption:"New video"}}}(a)]),W(null)},ab=a=>{};return(0,b.jsxs)(e.Container,{maxWidth:!1,disableGutters:!0,sx:{display:"flex",flexDirection:"column",flex:1,padding:2,height:"100%",width:"100%"},children:[(0,b.jsx)(r.ProjectHeader,{}),(0,b.jsxs)(e.Container,{maxWidth:!1,disableGutters:!0,sx:{flex:1,width:"100%",paddingTop:2},children:[(0,b.jsxs)(c.Box,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:1,mb:2},children:[(0,b.jsx)(h.Typography,{variant:"h6",fontWeight:600,children:"Scratch Pad Ideas"}),(0,b.jsx)(d.Button,{variant:"contained",color:"primary",size:"small",startIcon:(0,b.jsx)(j.default,{}),onClick:a=>W(a.currentTarget),"aria-controls":V?"add-scratch-card-menu":void 0,"aria-haspopup":"true","aria-expanded":V?"true":void 0,children:"Add card"})]}),(0,b.jsxs)(f.default,{id:"add-scratch-card-menu",anchorEl:V,open:!!V,onClose:()=>W(null),anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:[(0,b.jsx)(g.MenuItem,{onClick:()=>aa("note"),children:"Note"}),(0,b.jsx)(g.MenuItem,{onClick:()=>aa("link"),children:"Link"}),(0,b.jsx)(g.MenuItem,{onClick:()=>aa("image"),children:"Image"}),(0,b.jsx)(g.MenuItem,{onClick:()=>aa("video"),children:"Video"})]}),(0,b.jsx)(c.Box,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"repeat(2, 1fr)",md:"repeat(3, 1fr)",lg:"repeat(4, 1fr)"},gap:2},children:T.map(a=>(0,b.jsx)(G,{data:a,onMoveTo:ab},a.id))})]})]})}a.s(["default",()=>I],49056)}];

//# sourceMappingURL=_9ff00354._.js.map